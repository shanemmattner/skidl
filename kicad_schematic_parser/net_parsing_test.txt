============================= test session starts ==============================
platform darwin -- Python 3.13.1, pytest-8.3.4, pluggy-1.5.0 -- /Users/shanemattner/Desktop/skidl/kicad_schematic_parser/venv/bin/python3.13
cachedir: .pytest_cache
rootdir: /Users/shanemattner/Desktop/skidl/kicad_schematic_parser
configfile: pyproject.toml
collecting ... collected 2 items

src/kicad_hierarchy_parser/tests/net_parsing_tests/test_net_parsing.py::test_resistor_divider FAILED [ 50%]
src/kicad_hierarchy_parser/tests/net_parsing_tests/test_net_parsing.py::test_power_supply FAILED [100%]

=================================== FAILURES ===================================
____________________________ test_resistor_divider _____________________________

schematic_parser = <function schematic_parser.<locals>._parser at 0x101568e00>

    def test_resistor_divider(schematic_parser):
        """Test basic resistor divider circuit net parsing"""
        components, wires, labels = schematic_parser('/Users/shanemattner/Desktop/skidl/kicad_schematic_parser/example_kicad_project/resistor_divider.kicad_sch')
        netlist = calculate_pin_connectivity(components, wires, labels)
    
        # Verify expected nets exist
>       assert 'VIN' in netlist
E       AssertionError: assert 'VIN' in {}

src/kicad_hierarchy_parser/tests/net_parsing_tests/test_net_parsing.py:48: AssertionError
----------------------------- Captured stdout call -----------------------------

=== Sheets ===

=== Components ===

Component: Device/R
	Properties:
		Reference: R10
		Value: 1k
		Footprint: Resistor_SMD:R_0603_1608Metric
		Datasheet: ~
		Description: Resistor
	Position: (121.92, 81.28), Angle: 0
Unit: 1

Component: Device/R
	Properties:
		Reference: R9
		Value: 2k
		Footprint: Resistor_SMD:R_0603_1608Metric
		Datasheet: ~
		Description: Resistor
	Position: (121.92, 63.5), Angle: 0
Unit: 1

Component: Device/C
	Properties:
		Reference: C10
		Value: 100nF
		Footprint: 
		Datasheet: ~
		Description: Unpolarized capacitor
	Position: (138.43, 77.47), Angle: 0
Unit: 1

=== Pin Details ===

Component: #PWR025

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: #PWR028

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: R10

	Pin 1 (~):
		Position: (0.00, 3.81)
		Type: passive
		Alternate Functions:

	Pin 2 (~):
		Position: (0.00, -3.81)
		Type: passive
		Alternate Functions:

Component: R9

	Pin 1 (~):
		Position: (0.00, 3.81)
		Type: passive
		Alternate Functions:

	Pin 2 (~):
		Position: (0.00, -3.81)
		Type: passive
		Alternate Functions:

Component: C10

	Pin 1 (~):
		Position: (0.00, 3.81)
		Type: passive
		Alternate Functions:

	Pin 2 (~):
		Position: (0.00, -3.81)
		Type: passive
		Alternate Functions:

=== Labels ===

Local Labels:

Hierarchical Labels and Sheet Pins:
	Label: VIN (input) at (121.92, 59.69)
	Label: VOUT (input) at (138.43, 73.66)

Power Labels:
	GND at (121.92, 85.09)
	GND at (138.43, 81.28)

=== Netlist ===

MERGED_NET_1:
	#PWR025 Pin 1 (~)
	#PWR028 Pin 1 (~)

MERGED_NET_2:
	R10 Pin 1 (~)
	R9 Pin 1 (~)
	C10 Pin 1 (~)

MERGED_NET_3:
	R10 Pin 2 (~)
	R9 Pin 2 (~)
	C10 Pin 2 (~)
______________________________ test_power_supply _______________________________

schematic_parser = <function schematic_parser.<locals>._parser at 0x101652160>

    def test_power_supply(schematic_parser):
        """Test power supply circuit with multiple voltage rails"""
        components, wires, labels = schematic_parser('/Users/shanemattner/Desktop/skidl/kicad_schematic_parser/example_kicad_project/power2.kicad_sch')
        netlist = calculate_pin_connectivity(components, wires, labels)
    
>       assert '3V3' in netlist
E       AssertionError: assert '3V3' in {}

src/kicad_hierarchy_parser/tests/net_parsing_tests/test_net_parsing.py:62: AssertionError
----------------------------- Captured stdout call -----------------------------

=== Sheets ===

=== Components ===

Component: Device/R
	Properties:
		Reference: R11
		Value: R
		Footprint: Resistor_SMD:R_0603_1608Metric
		Datasheet: ~
		Description: Resistor
	Position: (120.65, 128.27), Angle: 0
Unit: 1

Component: Device/C
	Properties:
		Reference: C11
		Value: C
		Footprint: 
		Datasheet: ~
		Description: Unpolarized capacitor
	Position: (137.16, 124.46), Angle: 0
Unit: 1

Component: Device/R
	Properties:
		Reference: R2
		Value: R
		Footprint: Resistor_SMD:R_0603_1608Metric
		Datasheet: ~
		Description: Resistor
	Position: (73.66, 111.76), Angle: 0
Unit: 1

Component: Regulator_Linear/NCP1117-3.3_SOT223
	Properties:
		Reference: U1
		Value: NCP1117-3.3_SOT223
		Footprint: Package_TO_SOT_SMD:SOT-223-3_TabPin2
		Datasheet: http://www.onsemi.com/pub_link/Collateral/NCP1117-D.PDF
		Description: 1A Low drop-out regulator, Fixed Output 3.3V, SOT-223
	Position: (90.17, 63.5), Angle: 0
Unit: 1

Component: Device/C
	Properties:
		Reference: C2
		Value: 10uF
		Footprint: Capacitor_SMD:C_0603_1608Metric
		Datasheet: ~
		Description: Unpolarized capacitor
	Position: (107.95, 67.31), Angle: 0
Unit: 1

Component: Device/C
	Properties:
		Reference: C3
		Value: 10uF
		Footprint: Capacitor_SMD:C_0603_1608Metric
		Datasheet: ~
		Description: Unpolarized capacitor
	Position: (73.66, 67.31), Angle: 0
Unit: 1

Component: Device/C
	Properties:
		Reference: C9
		Value: C
		Footprint: 
		Datasheet: ~
		Description: Unpolarized capacitor
	Position: (90.17, 125.73), Angle: 0
Unit: 1

Component: Device/R
	Properties:
		Reference: R8
		Value: R
		Footprint: Resistor_SMD:R_0603_1608Metric
		Datasheet: ~
		Description: Resistor
	Position: (120.65, 110.49), Angle: 0
Unit: 1

Component: Device/R
	Properties:
		Reference: R7
		Value: R
		Footprint: Resistor_SMD:R_0603_1608Metric
		Datasheet: ~
		Description: Resistor
	Position: (73.66, 129.54), Angle: 0
Unit: 1

=== Pin Details ===

Component: #PWR029

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: #PWR012

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: #PWR024

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: R11

	Pin 1 (~):
		Position: (0.00, 3.81)
		Type: passive
		Alternate Functions:

	Pin 2 (~):
		Position: (0.00, -3.81)
		Type: passive
		Alternate Functions:

Component: C11

	Pin 1 (~):
		Position: (0.00, 3.81)
		Type: passive
		Alternate Functions:

	Pin 2 (~):
		Position: (0.00, -3.81)
		Type: passive
		Alternate Functions:

Component: #PWR031

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: #PWR09

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: R2

	Pin 1 (~):
		Position: (0.00, 3.81)
		Type: passive
		Alternate Functions:

	Pin 2 (~):
		Position: (0.00, -3.81)
		Type: passive
		Alternate Functions:

Component: U1

	Pin 1 (GND):
		Position: (0.00, -7.62)
		Type: power_in
		Alternate Functions:

	Pin 2 (VO):
		Position: (7.62, 0.00)
		Type: power_out
		Alternate Functions:

	Pin 3 (VI):
		Position: (-7.62, 0.00)
		Type: power_in
		Alternate Functions:

Component: C2

	Pin 1 (~):
		Position: (0.00, 3.81)
		Type: passive
		Alternate Functions:

	Pin 2 (~):
		Position: (0.00, -3.81)
		Type: passive
		Alternate Functions:

Component: C3

	Pin 1 (~):
		Position: (0.00, 3.81)
		Type: passive
		Alternate Functions:

	Pin 2 (~):
		Position: (0.00, -3.81)
		Type: passive
		Alternate Functions:

Component: C9

	Pin 1 (~):
		Position: (0.00, 3.81)
		Type: passive
		Alternate Functions:

	Pin 2 (~):
		Position: (0.00, -3.81)
		Type: passive
		Alternate Functions:

Component: #PWR026

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: #PWR011

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: #PWR08

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: R8

	Pin 1 (~):
		Position: (0.00, 3.81)
		Type: passive
		Alternate Functions:

	Pin 2 (~):
		Position: (0.00, -3.81)
		Type: passive
		Alternate Functions:

Component: #PWR027

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: #PWR030

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: #PWR06

	Pin 1 (~):
		Position: (0.00, 0.00)
		Type: power_in
		Alternate Functions:

Component: R7

	Pin 1 (~):
		Position: (0.00, 3.81)
		Type: passive
		Alternate Functions:

	Pin 2 (~):
		Position: (0.00, -3.81)
		Type: passive
		Alternate Functions:

=== Labels ===

Local Labels:

Hierarchical Labels and Sheet Pins:
	Label: 3v3_monitor (input) at (137.16, 120.65)
	Label: 5v_monitor (input) at (90.17, 121.92)

Power Labels:
	+3V3 at (120.65, 93.98)
	GND at (73.66, 74.93)
	GND at (73.66, 133.35)
	GND at (137.16, 128.27)
	GND at (107.95, 74.93)
	GND at (90.17, 129.54)
	+5V at (73.66, 63.50)
	+3V3 at (107.95, 63.50)
	+5V at (73.66, 95.25)
	GND at (120.65, 132.08)
	GND at (90.17, 74.93)

=== Netlist ===

MERGED_NET_1:
	#PWR029 Pin 1 (~)
	#PWR012 Pin 1 (~)
	#PWR024 Pin 1 (~)
	#PWR031 Pin 1 (~)
	#PWR09 Pin 1 (~)
	#PWR026 Pin 1 (~)
	#PWR011 Pin 1 (~)
	#PWR08 Pin 1 (~)
	#PWR027 Pin 1 (~)
	#PWR030 Pin 1 (~)
	#PWR06 Pin 1 (~)

MERGED_NET_2:
	R11 Pin 1 (~)
	C11 Pin 1 (~)
	R2 Pin 1 (~)
	C2 Pin 1 (~)
	C3 Pin 1 (~)
	C9 Pin 1 (~)
	R8 Pin 1 (~)
	R7 Pin 1 (~)

MERGED_NET_3:
	R11 Pin 2 (~)
	C11 Pin 2 (~)
	R2 Pin 2 (~)
	C2 Pin 2 (~)
	C3 Pin 2 (~)
	C9 Pin 2 (~)
	R8 Pin 2 (~)
	R7 Pin 2 (~)

MERGED_NET_4:
	U1 Pin 1 (GND)

MERGED_NET_5:
	U1 Pin 2 (VO)

MERGED_NET_6:
	U1 Pin 3 (VI)
=========================== short test summary info ============================
FAILED src/kicad_hierarchy_parser/tests/net_parsing_tests/test_net_parsing.py::test_resistor_divider
FAILED src/kicad_hierarchy_parser/tests/net_parsing_tests/test_net_parsing.py::test_power_supply
============================== 2 failed in 0.03s ===============================
